<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/index.css" />
    <script src="https://kit.fontawesome.com/3fbc68957e.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <title>Task</title>
  </head>

  <body>
    {{! Navbar start }}
    <nav class="navbar navbar-expand-lg bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand text-light" href="/">Soal-4</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-link active text-light" aria-current="page" href="/">Home</a>
          </div>
        </div>
        {{#if isLogin}}
          <p class="me-3 text-light">Welcome, {{user.username}}</p>
          <a href="/logout" class="btn btn-light text-decoration-none me-3">Logout</a>
        {{else}}
          <a href="/login" class="btn btn-light text-decoration-none me-3">Login</a>
          <a href="/register" class="btn btn-light text-decoration-none">register</a>
        {{/if}}
      </div>
    </nav>
    {{! Navbar end }}

    {{! Collection }}
    <div class="container collection-container my-5 shadow p-4" style="width: 50%;">

      <div class="collection-menu d-flex justify-content-between">
        <div class="back-page">
          <a href="/"><i class="fa-solid fa-arrow-left fs-1 text-dark"></i></a>
        </div>
        <div class="collection-name rounded bg-dark d-flex justify-content-between px-2 ps-3 ms-5">
          <div class="me-3">
            <p class="text-light my-1">{{collection.name}}</p>
            <p class="text-secondary my-1">{{objTaskTrue.length}}/{{objTask.length}} done</p>
          </div>
          {{#if complete}}
            <div class="my-auto">
              <i class="fa-regular fa-circle-check text-success fs-1"></i>
            </div>
          {{else}}
            <div class="my-auto">
              <i class="fa-regular fa-clock text-warning fs-1"></i>
            </div>
          {{/if}}

        </div>
        {{#if isLogin}}
          <form action="/delete/{{collection.id}}" method="post">
            <button class="btn btn-dark justify-content-center" type="submit">Delete</button>
          </form>
        {{/if}}
      </div>

      <div class="container collection-content mt-5">
        {{#if isLogin}}
          <form action="/task/{{collection.id}}" method="post">
            <div class="mb-2">
              <label for="InputTask" class="form-label">Add a task</label>
              <input class="form-control rounded border-dark" type="text" name="task" id="inputTask" />
            </div>
            <div class="d-flex justify-content-end">
              <button type="submit" class="btn btn-dark">Add</button>
            </div>
          </form>
        {{else}}
          <p>Login untuk menambahkan</p>
        {{/if}}

        <div class="container collection-task mt-5">
          <div class="task mb-4">
            <h2>Task - {{objTaskFalse.length}}</h2>
            {{#each objTaskFalse}}
              <div class="task-check d-flex gap-2">
                <p class="form-check-label rounded bg-dark text-light p-2" style="width: 90%;">
                  {{this.name}}
                </p>

                <form class="" method="post" action="/done/{{this.id}}">
                  <button class="btn btn-dark rounded border-0 fs-3"><i class="fa-solid fa-check"></i></button>
                </form>

                <form class="" method="post" action="/deleteTask/{{this.id}}">
                  <button class="btn btn-dark rounded border-0 fs-3"><i class="fa-solid fa-trash"></i></button>
                </form>
              </div>
            {{/each}}

          </div>

          <div class="complete">
            <h2>Complete - {{objTaskTrue.length}}</h2>

            {{#each objTaskTrue}}
              <div class="task-check d-flex gap-2">
                <p class="form-check-label rounded bg-dark text-light p-2" style="width: 90%;">
                  {{this.name}}
                </p>

                <form class="" method="post" action="/deleteTask/{{this.id}}">
                  <button class="btn btn-dark rounded border-0 fs-3"><i class="fa-solid fa-trash"></i></button>
                </form>
              </div>
            {{/each}}
          </div>

        </div>
      </div>
    </div>
    {{! Collection }}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>

</html>